<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R tips</title>
    <meta charset="utf-8" />
    <meta name="author" content="Peng Chen email: pengchen2001@zju.edu.cn" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="zh-CN.css" type="text/css" />
    <link rel="stylesheet" href="extra.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# R tips
]
.subtitle[
## for advanced use
]
.author[
### Peng Chen
email: <a href="mailto:pengchen2001@zju.edu.cn" class="email">pengchen2001@zju.edu.cn</a>
]
.institute[
### ZJU LSI Jianglab
]
.date[
### 2023/7/7
]

---



class: middle
##  Lv1. Use R
## .gray-title[Lv2. R programming]
## .gray-title[Lv3. R markdown (to everything)]
## .gray-title[Lv4. R package/shiny]

.footnote[[*] æ‰ç–å­¦æµ…ï¼Œä»…ä»£è¡¨æœ¬äººå­¦ä¹ ç»éªŒï¼ŒRæ˜¯ä¸€ä¸ªå®åº“ï¼Œæ­¤å¤„åªæ˜¯å†°å±±ä¸€è§’ã€‚[ä¸‹è½½pptåŠèµ„æ–™](R_tips_for_advanced_use_byAsa.zip)]

---

# Rè¯­è¨€ç®€ä»‹
Rè¯­è¨€æ˜¯Sè¯­è¨€çš„ä¸€ä¸ªå˜ç§ã€‚Sè¯­è¨€ç”±Rick Beckerç­‰äººåœ¨è´å°”å®éªŒå®¤å¼€å‘ï¼ˆè‘—åçš„Cè¯­è¨€ã€Unixç³»ç»Ÿå¼€å‘å®éªŒå®¤ï¼‰ã€‚

Ræ˜¯ä¸€ä¸ªè‡ªç”±æºä»£ç è½¯ä»¶ï¼ŒGPLæˆæƒï¼Œäº1997å¹´å‘å¸ƒï¼Œå®ç°äº†ä¸Sè¯­è¨€åŸºæœ¬ç›¸åŒçš„åŠŸèƒ½å’Œç»Ÿè®¡åŠŸèƒ½ã€‚ ç°åœ¨ç”±Ræ ¸å¿ƒå›¢é˜Ÿå¼€å‘ï¼Œä½†å…¨ä¸–ç•Œçš„ç”¨æˆ·éƒ½å¯ä»¥è´¡çŒ®è½¯ä»¶åŒ…ã€‚ 

Rçš„ç½‘ç«™: http://www.r-project.org/

ç‰¹ç‚¹ï¼š
- è‡ªç”±è½¯ä»¶ï¼Œå…è´¹ã€å¼€æ”¾æºä»£ç ï¼Œæ”¯æŒå„ä¸ªä¸»è¦è®¡ç®—æœºç³»ç»Ÿï¼›

- å…·æœ‰å®Œå–„çš„æ•°æ®ç±»å‹ï¼Œä»£ç ç®€æ´ã€å¯è¯»ï¼›
- **å¼ºè°ƒäº¤äº’å¼æ•°æ®åˆ†æï¼Œæ”¯æŒå¤æ‚ç®—æ³•æè¿°ï¼Œå›¾å½¢åŠŸèƒ½å¼º**ï¼›

- ç»Ÿè®¡ç§‘ç ”å·¥ä½œè€…å¹¿æ³›ä½¿ç”¨Rè¿›è¡Œè®¡ç®—å’Œå‘è¡¨ç®—æ³•ã€‚Ræœ‰**ä¸Šä¸‡æ‰©å±•åŒ…**(æˆªæ­¢2023å¹´7æœˆ5æ—¥åœ¨RåŒ…ç½‘ç«™CRANä¸Šæœ‰19784ä¸ª)ã€‚

---

# æŠ€æœ¯ç‰¹ç‚¹

Sè¯­è¨€ä½œè€…ï¼ŒRè¯­è¨€ä¸“å®¶J. M. ChambersæŒ‡å‡ºRçš„.red[æœ¬è´¨ç‰¹å¾]ï¼š

- Rä¸­æ‰€æœ‰çš„å­˜åœ¨éƒ½æ˜¯**å¯¹è±¡**ï¼ˆobjectï¼‰ï¼›
- Rä¸­å‘ç”Ÿçš„åŠ¨ä½œéƒ½æ˜¯**å‡½æ•°è°ƒç”¨**ï¼ˆfunction callï¼‰ã€‚

--

è¯¦ç»†åœ°è¯´Ræœ‰å¦‚ä¸‹æŠ€æœ¯ç‰¹ç‚¹ï¼š

- å‡½æ•°ç¼–ç¨‹ï¼ˆfunctional programmingï¼‰ã€‚

- æ”¯æŒå¯¹è±¡ç±»å’Œç±»æ–¹æ³•ï¼Œé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡ã€‚
- åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œè§£é‡Šæ‰§è¡Œï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚

- æ•°æ®æ¡†ï¼ˆdata.frameï¼‰æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç±»ä¼¼äºæ•°æ®åº“çš„è¡¨ã€‚
- å¯ä»¥ç”¨ä½œCå’ŒC++ã€FORTRANè¯­è¨€ç¼–å†™çš„ç®—æ³•åº“çš„æ¥å£ã€‚

- å†…éƒ¨æ•°å€¼ç®—æ³•é‡‡ç”¨å·²å¹¿æ³›æµ‹è¯•å’Œé‡‡çº³çš„ç®—æ³•å®ç°ï¼Œå¦‚æ’åºã€çº¿æ€§ä»£æ•°ç­‰ã€‚

---

background-image: url(images/R.jpg)
background-size: 100px
background-position: 90% 8%


# R &amp; Rstudio
- Ræ˜¯ä¸€ç§ç»Ÿè®¡å­¦ç¼–ç¨‹è¯­è¨€
- Rstudioæ˜¯Rè¯­è¨€æœ€å¥½çš„IDEï¼ˆIntegrated development environmentï¼‰

&lt;img src="images/Rstudio.png" alt="Rstudio" width="80%"&gt;

???
è¿›å…¥Rstudioçœ‹ä¸€çœ‹
ä»‹ç»æ›´å¤šçš„ä¸œè¥¿

---

## More about Rstudio
2022å¹´RStudioå…¬å¸æ­£å¼æ”¹åPositï¼Œæ‹¥æŠ±å¤§æ•°æ®ç§‘å­¦ç”Ÿæ€ï¼šRã€Pythonã€Julia...

&lt;img src="images/Rstudio2.png" alt="Rstudio" width="70%" style="float:left"&gt;

RStudioä½¿ç”¨æ–¹æ³•æ¦‚è¦PDFä¸‹è½½ï¼š[rstudio-ide.pdf](https://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/rstudio-ide.pdf)

Rstuidoçš„é­”æ³•ï¼šæŒ‰ä½Ctrlï¼ˆCommandï¼‰å•å‡»æŸä¸ªå˜é‡åæˆ–å‡½æ•°åï¼Œå¦‚æœæ˜¯data.frameå°±å¯ä»¥è¿›å…¥é¢„è§ˆçª—æ ¼ï¼Œ
å¦‚æœæ˜¯å‡½æ•°å°±å¯ä»¥è¿›å…¥å‡½æ•°å†…éƒ¨çœ‹å…·ä½“çš„ä»£ç ã€‚

å…¶å®æ˜¯è°ƒç”¨äº†`View()`å‡½æ•°ï¼Œå¯¹äºä¸æ˜¯ä»¥ä¸Šç±»å‹çš„å¯¹è±¡æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ã€‚

---
## å­¦ä¹ èµ„æ–™
### å…¨é¢æ•™ç¨‹
å°ç™½ä¸Šæ‰‹é¦–æ¨åŒ—å¤§æè€å¸ˆçš„è¯¾ç¨‹è®²ä¹‰[ã€ŠRè¯­è¨€æ•™ç¨‹ã€‹](https://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html)ï¼Œä¸­æ–‡è®²ä¹‰ï¼Œç®€å•æ˜“è¯»ï¼Œç”šè‡³æ•´æœ¬ä¹¦å°±æ˜¯ç”¨Rbookdownç¼–å†™çš„ï¼Œç”µå­ä¹¦ä¹Ÿæ¯”è¾ƒå¥½å¤åˆ¶ä»£ç è¿›è¡Œå­¦ä¹ ã€‚

[ã€ŠRè¯­è¨€å®æˆ˜ã€‹](https://www.zhihu.com/search?q=R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A217799209%7D)ï¼Œä¹Ÿæœ‰ä¸­æ–‡ç‰ˆï¼Œä»‹ç»åœ°æ›´åŠ å…¨é¢ä¸”æœ‰ä¸å°‘è¿›é˜¶çŸ¥è¯†ï¼Œå€¼å¾—ä¸€çœ‹ï¼

&lt;img src="images/Rshizhan.jpg" alt="Rshizhan" width="25%" style="float:right"&gt;

ç„¶åæ˜¯è‘—åçš„è‹±æ–‡ä¹¦å’Œå‚è€ƒæ‰‹å†Œï¼š

-   [ã€ŠAn Introduction to Rã€‹](cran.r-project.org/doc/manuals/R-intro.pdf)
-   [ã€ŠR Cookbookã€‹](https://rc2e.com/)

---
## å­¦ä¹ èµ„æ–™
###æ•°æ®å¤„ç†

tidyverseå…¨å®¶æ¡¶ï¼Œå…¶ä¸­åŒ…å«ggplot2ï¼Œtibbleï¼Œdplyrï¼Œreadrï¼Œstringrç­‰å¸¸ç”¨çš„å…¨é¢çš„æ•°æ®å¤„ç†åŒ…ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„æ»¡è¶³æˆ‘ä»¬ä¸‹æ¸¸æ•°æ®å¤„ç†éœ€æ±‚ï¼š

&lt;a href="https://bookdown.org/roy_schumacher/r4ds/"&gt;
&lt;img src="images/Rdatasci.png" alt="R data science" width="20%" style="float:right"&gt;&lt;/a&gt;

- è¯»å–æ•°æ®
- æ¸…æ´—æ•°æ®
- è½¬æ¢æ•°æ®
- åˆå¹¶æ•°æ®
- ç­›é€‰æ•°æ®
- å¯è§†åŒ–


å®˜æ–¹æ•™ç¨‹ï¼š[ã€ŠR for Data Scienceã€‹](https://bookdown.org/roy_schumacher/r4ds/)ï¼Œéå¸¸å»ºè®®ç†Ÿè¯»å¹¶ä½¿ç”¨

---
## å­¦ä¹ èµ„æ–™
&lt;a href="https://ggplot2-book.org/"&gt;
&lt;img src="images/ggplot2.jpg" alt="R data science" width="20%" style="float:right"&gt;&lt;/a&gt;

###å¯è§†åŒ–

ggplotå®˜æ–¹æ•™ç¨‹ï¼š[ã€Šggplot2: Elegant Graphics for Data Analysisã€‹](https://ggplot2-book.org/)

&lt;a href="https://www.data-to-viz.com"&gt;
&lt;img src="images/data2viz.png" alt="ggplot2" width="50%" style="float:left"&gt;&lt;/a&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
ä¸ºå¯è§†åŒ–è€Œå»ºçš„ç½‘ç«™ï¼š[From data to Viz \| Find the graphic you need](https://www.data-to-viz.com)

---
## å­¦ä¹ èµ„æ–™
###Rç¼–ç¨‹

&lt;a href="https://adv-r.hadley.nz/"&gt;
&lt;img src="images/advancer.png" alt="advanced r" width="20%" style="float:right"&gt;&lt;/a&gt;

[ã€ŠAdvanced Rã€‹](https://adv-r.hadley.nz/)ï¼Œå¯¹Ré«˜çº§ç¼–ç¨‹æŠ€æœ¯è¿›è¡Œè®²è§£

æ›´å¤šå…³äºRçš„ä¹¦å¯ä»¥åœ¨[Home \| Bookdown](https://bookdown.org/)è¿™é‡Œæ‰¾åˆ°ã€‚
&lt;br&gt;
&lt;br&gt;
&lt;a href="https://www.data-to-viz.com"&gt;
&lt;img src="images/rbooks.png" alt="ggplot2" width="55%"&gt;&lt;/a&gt;

---
# åŸºæœ¬ä½¿ç”¨

å¾ˆå¤šäººä½¿ç”¨ Rï¼Œåªä¸ºç”¨å…¶ä¸­çš„æŸä¸ªåŒ…çš„æŸä¸ªåŠŸèƒ½ï¼Œåªéœ€å­¦ä¼šä»¥ä¸‹å‡ æ­¥å³å¯ï¼š

1. è£…å¥½R &amp; Rstudio âœ…

2. è®¤è¯†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç»“æ„
3. è£…å¥½éœ€è¦çš„åŒ…

4. æ­£ç¡®æ•°æ®/å›¾åƒè¯»å…¥å’Œå†™å‡º
5. å…³é—­Rèµ°äºº

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç±»å‹

.pull-left[
- æ•°å€¼å‹å¸¸é‡ `1,1e2,5L,Inf,-Inf`;

- å­—ç¬¦å‹å¸¸é‡ `"str",'str'`;

- é€»è¾‘å‹å¸¸é‡ `TRUE,FALSE,T,F`;

- ç¼ºå¤±å€¼ `NaN,NA`, ç©ºå€¼ `NULL`;

- å¤æ•°å¸¸é‡ `2.2 + 3.5i`;

- å˜é‡ï¼ŒåŒºåˆ†å¤§å°å†™çš„å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œå¥ç‚¹ç»„æˆå˜é‡åï¼Œæ”¯æŒä½†ä¸å»ºè®®ä¸­æ–‡;
]

.pull-right[

```r
typeof(c(123,10e2,12L,Inf,-Inf))
```

```
## [1] "double"
```

```r
typeof(c("str",'str'))
```

```
## [1] "character"
```

```r
typeof(c(TRUE,FALSE,T,F))
```

```
## [1] "logical"
```

```r
typeof(2.2 + 3.5i)
```

```
## [1] "complex"
```

```r
typeof(NULL)
```

```
## [1] "NULL"
```
]

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç»“æ„ï¼šå‘é‡(vector)

ç”¨`c()`å‡½æ•°æŠŠå¤šä¸ªå…ƒç´ æˆ–å‘é‡ç»„åˆæˆä¸€ä¸ª**å‘é‡**ã€‚å¦‚æœå…ƒç´ åŸºæœ¬ç±»å‹ä¸åŒï¼Œå°†ç»Ÿä¸€è½¬æ¢æˆæœ€å¤æ‚çš„ä¸€ä¸ªï¼Œå¤æ‚ç¨‹åº¦ä»ç®€å•åˆ°å¤æ‚ä¾æ¬¡ä¸ºï¼š logical&lt;integer&lt;double&lt;characterã€‚æ­¤å¤–è¿˜å¯ä»¥æœ‰Dateå’Œfactorç±»å‹çš„å…ƒç´ 

```r
x &lt;- c(1:3, 10:13);x
```

```
## [1]  1  2  3 10 11 12 13
```

```r
x[2]=T #ç±»å‹è½¬æ¢ï¼ŒTä¸º1ï¼ŒFä¸º0
x
```

```
## [1]  1  1  3 10 11 12 13
```

```r
x[1]="T" #ç±»å‹å‡æ¡£ï¼Œå…¨éƒ¨å˜ä¸ºcharacter
x
```

```
## [1] "T"  "1"  "3"  "10" "11" "12" "13"
```

```r
is.vector(x)
```

```
## [1] TRUE
```

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç»“æ„ï¼šåˆ—è¡¨(list)

åˆ—è¡¨(list)ç±»å‹åŒ…è£…ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ã€‚å•ä¸ªåˆ—è¡¨å…ƒç´ å¿…é¡»ç”¨ä¸¤é‡æ–¹æ‹¬å·æ ¼å¼è®¿é—®,å•é‡æ–¹æ‹¬å·ç»“æœè¿˜æ˜¯åˆ—è¡¨è€Œä¸æ˜¯åˆ—è¡¨å…ƒç´ ã€‚

```r
rec &lt;- list(name="ææ˜", age=30,scores=c(85, 76, 90))
rec
## $name
## [1] "ææ˜"
## 
## $age
## [1] 30
## 
## $scores
## [1] 85 76 90
typeof(rec)
## [1] "list"
rec[[1]]
## [1] "ææ˜"
typeof(rec[[1]])
## [1] "character"
rec[1]
## $name
## [1] "ææ˜"
typeof(rec[1])
## [1] "list"
```

æ™®é€šæœ‰nameså±æ€§çš„åˆ—è¡¨å¯ä»¥ç”¨`$`è®¿é—®å…ƒç´ ï¼ŒS4å¯¹è±¡å¯ä»¥ç”¨`@`è®¿é—®å…ƒç´ ã€‚

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç»“æ„ï¼šçŸ©é˜µï¼Œæ•°ç»„(matrix, array)

çŸ©é˜µç”¨matrixå‡½æ•°å®šä¹‰ï¼Œå®é™…å­˜å‚¨æˆä¸€ä¸ªå‘é‡ï¼Œæ ¹æ®ä¿å­˜çš„è¡Œæ•°å’Œåˆ—æ•°å¯¹åº”åˆ°çŸ©é˜µçš„å…ƒç´ ï¼Œ å­˜å‚¨æ¬¡åºä¸ºæŒ‰åˆ—å­˜å‚¨ã€‚ 

```r
A &lt;- matrix(11:16, nrow=3, ncol=2) ;A
```

```
##      [,1] [,2]
## [1,]   11   14
## [2,]   12   15
## [3,]   13   16
```
çŸ©é˜µæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šç»´æ•°ç»„

```r
ara &lt;- array(1:24, dim=c(1,2,2)) ;ara
```

```
## , , 1
## 
##      [,1] [,2]
## [1,]    1    2
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    3    4
```

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç»“æ„ï¼šæ•°æ®æ¡†(data.frame)

æ•°æ®æ¡†ç±»ä¼¼äºä¸€ä¸ªçŸ©é˜µï¼Œæœ‰å¤šä¸ªæ¨ªè¡Œã€å¤šä¸ªçºµåˆ—ï¼Œå„åˆ—å…è®¸æœ‰ä¸åŒç±»å‹ï¼šæ•°å€¼å‹ã€å› å­ã€å­—ç¬¦ã€æ—¥æœŸæ—¶é—´ï¼Œä½†åŒä¸€åˆ—çš„æ•°æ®ç±»å‹ç›¸åŒã€‚å–å­é›†åº”æ³¨æ„`drop` ã€‚

```r
d &lt;- data.frame(name=c("ææ˜", "å¼ èª", "ç‹å»º"),age=c(30, 35, 28), height=c(180, 162, 175))
str(d)
```

```
## 'data.frame':	3 obs. of  3 variables:
##  $ name  : chr  "ææ˜" "å¼ èª" "ç‹å»º"
##  $ age   : num  30 35 28
##  $ height: num  180 162 175
```

```r
d[1:2, "age"]
```

```
## [1] 30 35
```

```r
d[1:2, "age",drop=FALSE]
```

```
##   age
## 1  30
## 2  35
```

```r
is.list(d)
```

```
## [1] TRUE
```

å¤§å¤šæ•°æ›´é«˜çº§çš„å¯¹è±¡æœ¬è´¨ä¸Šéƒ½æ˜¯listï¼ŒåŒ…æ‹¬data.frame

---
### åŸºæœ¬ä½¿ç”¨
2&amp;#46; è®¤è¯†åŸºæœ¬æ•°æ®ç»“æ„ï¼šæ”¹è¿›æ•°æ®æ¡†(tibble)

tibbleç±»å‹æ˜¯ä¸€ç§æ”¹è¿›çš„æ•°æ®æ¡†ï¼Œtidyverseå…¨å®¶æ¡¶æ¨èä½¿ç”¨ï¼Œç¡®å®æœ‰ä¸å°‘å¥½å¤„ï¼š
ä¸ä¼šéšæ„æ”¹å˜æˆ‘ä»¬çš„æ•°æ®åç§°ï¼Œç±»å‹ã€‚æ‰“å°ä¼˜ç¾ã€‚

```r
class(d)
```

```
## [1] "data.frame"
```

```r
library(tibble)
td=as_tibble(d)
td
```

```
## # A tibble: 3 Ã— 3
##   name    age height
##   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 ææ˜     30    180
## 2 å¼ èª     35    162
## 3 ç‹å»º     28    175
```

```r
class(td)
```

```
## [1] "tbl_df"     "tbl"        "data.frame"
```

---
### åŸºæœ¬ä½¿ç”¨
3&amp;#46; è£…å¥½éœ€è¦çš„åŒ…

åŒ…æ˜¯Rå‡½æ•°ã€æ•°æ®ã€é¢„ç¼–è¯‘ä»£ç ä»¥ä¸€ç§å®šä¹‰å®Œå–„çš„æ ¼å¼ç»„æˆçš„é›†åˆã€‚
- æ‰¾åˆ°åŒ…ï¼Œä¸»è¦å¹³å°ï¼š
    - [CRAN](https://cran.r-project.org/) å®˜æ–¹å­˜å‚¨åº“ï¼Œå¤šä¸ªé•œåƒ
    - [BioConductor](https://www.bioconductor.org/) ç”¨äºç”Ÿç‰©ä¿¡æ¯å­¦çš„å¼€æºè½¯ä»¶ä¸“é¢˜åº“
    - [Github](https://github.com/) å¼€å‘ç‰ˆæœ¬ï¼Œæ— é™æƒŠå–œï¼Œä½†ä¹Ÿå¯èƒ½ç¼ºå°‘ç»´æŠ¤
    - Bitbucketã€SVN...
- è£…åœ¨å“ªï¼Œæœ¬æœºä½ç½®ï¼š

è®¡ç®—æœºä¸Šå­˜å‚¨åŒ…çš„ç›®å½•ç§°ä¸ºåº“ï¼ˆlibraryï¼‰ã€‚
å‡½æ•°`.libPaths()`èƒ½å¤Ÿæ˜¾ç¤ºåº“æ‰€åœ¨çš„ä½ç½®ï¼Œå‡½æ•°`library()`å¯ä»¥æ˜¾ç¤ºåº“ä¸­æœ‰å“ªäº›åŒ…ã€‚


```r
.libPaths()
```

```
## [1] "/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library"
```

è¿™ä¸ªåœ°å€å¾ˆé‡è¦ï¼Œæœ‰æ—¶å€™ä¼šæœ‰å¤šä¸ªï¼ˆå¦‚Windowsåˆ†åŒºï¼‰ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šè£…åœ¨å“ªé‡Œã€‚

---
### åŸºæœ¬ä½¿ç”¨
3&amp;#46; è£…å¥½éœ€è¦çš„åŒ…
- æ€ä¹ˆè£…ï¼Œ[ä¾‹å­](https://cran.r-project.org/web/packages/pcutils/index.html)ï¼šå¤§éƒ¨åˆ†æƒ…å†µä¸‹CRANç”¨ `install.packages("pkg")`ï¼ŒBioConductorç”¨`BiocManager::install("pkg")`ï¼ŒGithubç”¨`devtools::install_github("repos")`å³å¯ã€‚
ä½†æœ‰æ—¶å€™ä¼šæœ‰ä¾èµ–åŒ…ç›¸å…³çš„æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸‹è½½ç‰¹å®šç‰ˆæœ¬åŒ…æ–‡ä»¶åå®‰è£…ã€‚
&lt;a href="https://r-pkgs.org/structure.html#sec-package-states"&gt;
&lt;img src="images/pkg_state.png" alt="converting between package states" width="60%" style="float:right"&gt;&lt;/a&gt;
    - sourceï¼Œ æºç ï¼Œä¸€å †Rè„šæœ¬å’Œæ–‡æœ¬æ–‡ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨githubä¸Šçœ‹çš„å°±æ˜¯è¿™ä¸ªã€‚
    - bundleï¼Œ æ†ç»‘æ€ï¼Œå…¶å®å°±æ˜¯æ‰“åŒ…è¿‡çš„sourceï¼Œä¸€èˆ¬.tar.gzç»“å°¾ã€‚
    - binaryï¼Œ äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼Œæ¶æ„ä¸ä¸€æ ·ï¼Œ.zip(Windows)æˆ–.tgz(macOS)ç»“å°¾ã€‚
    
æ‰€è°“å®‰è£…åŒ…å°±æ˜¯æŠŠsourceå˜æˆbinaryåœ¨æ”¾åœ¨æˆ‘ä»¬çš„`.libPaths()`æ–‡ä»¶å¤¹ä¸‹ã€‚

è¿˜æœ‰é—®é¢˜ï¼Œè°·æ­Œå¤§æ³•ï¼Œæˆ–githubé—®åŒ…ä½œè€…ã€‚
å¸¦C++çš„RåŒ…å‡ºé—®é¢˜ä¼šéº»çƒ¦ä¸€äº›ï¼Œéœ€è¦è€ƒå¯Ÿè‡ªå·±æœ¬æœºçš„Cè¯­è¨€ç¼–è¯‘å™¨ã€‚

---

### åŸºæœ¬ä½¿ç”¨
3&amp;#46; è£…å¥½éœ€è¦çš„åŒ…
- æ€ä¹ˆç”¨åŒ…

é¦–å…ˆå¯ä»¥ç”¨`library(pkg)`æˆ–`require(pkg)`å°†åŒ…å¯¼å…¥å†…å­˜ï¼Œè¿™æ ·ä¾¿å¯ä»¥è°ƒç”¨å…¶ä¸­çš„å‡½æ•°ã€‚
`search()`å‡½æ•°å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å·²ç»libraryçš„åŒ…ã€‚

```r
library(pcutils)
search()
```

```
##  [1] ".GlobalEnv"        "package:pcutils"   "package:tibble"   
##  [4] "package:stats"     "package:graphics"  "package:grDevices"
##  [7] "package:utils"     "package:datasets"  "package:methods"  
## [10] "Autoloads"         "package:base"
```


```r
if(!require("pcutils")) install.packages("pcutils")
```
ä½¿ç”¨`pkg::`åŠ ä¸Štabé”®å¯ä»¥åˆ—å‡ºæŸä¸ªåŒ…é‡Œæ‰€æœ‰å¯¼å‡ºçš„å‡½æ•°ï¼Œå¤šç”¨`help(pkg::func)`æˆ–`?pkg::func`æŸ¥çœ‹æŸä¸ªå‡½æ•°çš„ç”¨æ³•ã€‚

å¦‚æœä¸æƒ³ç”¨æŸä¸ªåŒ…äº†ï¼Œå¯ä»¥ç”¨`detach`ä»å½“å‰ç¯å¢ƒç§»é™¤ï¼ˆä¸æ˜¯åˆ é™¤åŒ…ï¼‰

```r
detach("package:pcutils")
```

---
### åŸºæœ¬ä½¿ç”¨
4&amp;#46; æ­£ç¡®çš„æ•°æ®/å›¾åƒè¯»å…¥å’Œå†™å‡º

å„ç§è¡¨æ ¼è¯»å–ï¼šread.table(), read.csv(), read.delim()

[test.txt](test.txt)

```r
read.table("test.txt") #æ— æ³•è¯»å–
```
å½“æˆ‘ä»¬çš„è¡¨æ ¼å«æœ‰ `", ', #` æˆ–è€…åˆ—åä¸­å«æœ‰ä»»ä½•éå˜é‡åå­—ç¬¦æ—¶éƒ½è¦å°å¿ƒ

```r
read.table("test.txt",header = T,sep = "\t",comment.char = "",quote = "",check.names = F)
```

å»ºè®®åœ¨readråŒ…çš„æ”¯æŒä¸‹ç”¨read_csv(), read_table2(), read_delim()ç­‰å‡½æ•°è¯»å…¥ã€‚

ä¿å­˜ä¸ºtibbleç±»å‹ï¼Œå¿«å¾—å¤šï¼Œä¹Ÿä¸è‡ªåŠ¨å°†å­—ç¬¦å‹åˆ—è½¬æ¢æˆå› å­ï¼Œä¸è‡ªåŠ¨ä¿®æ”¹å˜é‡åä¸ºåˆæ³•å˜é‡åã€‚

```r
readr::read_delim("test.txt",delim = "\t")
```

excelç”¨`readxl`åŒ…ï¼Œå‰ªåˆ‡æ¿å¯ç”¨`datapasta`åŒ…æˆ–`clipr::read_clip()`ã€‚è¡¨æ ¼å†™å‡ºç”¨`write_*()`ï¼Œä¸è¯»å…¥ä¸€è‡´ã€‚

---

### åŸºæœ¬ä½¿ç”¨
4&amp;#46; æ­£ç¡®çš„æ•°æ®/å›¾åƒè¯»å…¥å’Œå†™å‡º

ä»»æ„æ–‡ä»¶è®¿é—®ï¼Œè·Ÿpythonå¾ˆåƒï¼Œä½¿ç”¨`file()`æ‰“å¼€æ–‡ä»¶ï¼Œ`close()`å…³é—­ã€‚
- râ€”æ–‡æœ¬å‹åªè¯»;
wâ€”æ–‡æœ¬å‹åªå†™;
aâ€”æ–‡æœ¬å‹æœ«å°¾æ·»åŠ ;
- rbâ€”äºŒè¿›åˆ¶åªè¯»;
wbâ€”äºŒè¿›åˆ¶åªå†™;
abâ€”äºŒè¿›åˆ¶æœ«å°¾æ·»åŠ ;
- r+æˆ–r+bâ€”è¯»å†™;
w+æˆ–w+bâ€”è¯»å†™ï¼Œæ¸…ç©ºæ–‡ä»¶;
a+æˆ–a+bâ€”è¯»å’Œæœ«å°¾æ·»åŠ ã€‚

æˆ–è€…å¯ä»¥ç”¨`cat()`ç›´æ¥è¾“å‡ºä»»æ„æ–‡æœ¬åˆ°æ–‡ä»¶ã€‚

`clipr::write_clip()`å¯ä»¥æŠŠRæ•°æ®æ¡†æˆ–å‘é‡å†™å…¥å‰ªåˆ‡æ¿ï¼Œå¯ä»¥ç›´æ¥ç²˜è´´ä»–å¤„ã€‚

å›¾ç‰‡ä¿å­˜ï¼š


```r
pdf("new.pdf") #png(),jpg(),tiff(),bmp()
#ç”»ä¸€äº›å›¾
dev.off() #è¦è®°å¾—å…³é—­è®¾å¤‡
```


```r
ggplot2::ggsave("new.pdf",plot = p,device = "pdf") 
#pæ˜¯ä¸€ä¸ªggplotå¯¹è±¡ï¼Œdeviceå¯é€‰å„ç§æ–‡ä»¶æ ¼å¼
```

---

### åŸºæœ¬ä½¿ç”¨
4&amp;#46; æ­£ç¡®æ•°æ®/å›¾åƒè¯»å…¥å’Œå†™å‡º

Rå˜é‡å‚¨å­˜ï¼š

Rçš„`save()`å‘½ä»¤å¯ä»¥å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªRå˜é‡ä¿å­˜åˆ°æ–‡ä»¶(`.rda`æˆ–`.RData`)ä¸­ï¼Œä¿å­˜ç»“æœæ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œåœ¨ä¸åŒçš„Rè¿è¡Œç¯å¢ƒä¸­å…¼å®¹ã€‚
ä½¿ç”¨`load()`å¯ä»¥æ¢å¤ä¿å­˜çš„å˜é‡ã€‚

å¼ºçƒˆå»ºè®®ä¼ é€’æ•°æ®æ—¶ç”¨è¿™ç§æ–‡ä»¶ï¼Œé¿å…äº†æ•°æ®å†™å…¥å’Œè¯»å–æ—¶å¼•èµ·çš„å·®å¼‚ã€‚

ä½¿ç”¨`save.image()`å¯ä»¥æŠŠæ•´ä¸ªç¯å¢ƒçš„æ‰€æœ‰å˜é‡ä¿å­˜ï¼Œæ–¹ä¾¿ç»“æœå¤ç°ã€‚

ä¿å­˜å•å˜é‡æ—¶æ¨èä½¿ç”¨`saveRDS()`ï¼Œç”¨`readRDS()`è½½å…¥å¹¶è¿”å›å˜é‡ï¼Œè¿™æ ·å¯ä»¥å°†æŸä¸ªå˜é‡èµ‹å€¼ç»™æŸä¸ªæ‹Ÿå®šçš„å˜é‡åï¼Œé¿å…æŸä¸ªå˜é‡å€¼å˜äº†æˆ‘ä»¬è¿˜ä¸çŸ¥é“ï¼Œ å¦‚


```r
saveRDS(old,file = "tmp.RDS")
new=readRDS("tmp.RDS")
```

---
class: left, middle

## .gray-title[Lv1. Use R]
## Lv2. R programming
## .gray-title[Lv3. R markdown (to everything)]
## .gray-title[Lv4. R package/shiny]

---

# ç¨‹åºæ§åˆ¶ç»“æ„
1. åˆ†æ”¯ç»“æ„


```r
x=1
if(x&gt;0) {
  print("x &gt; 0")
} else {
  print("x &lt;= 0")
}
```

```
## [1] "x &gt; 0"
```

```r
#æˆ–è€…ç”¨switchå‡½æ•°
switch (x&gt;0,
    T = {print("x &gt; 0")},
    F = {print("x &lt;= 0")}
)
```

```
## [1] "x &gt; 0"
```

```r
#æˆ–è€…ç”¨ifelseå‡½æ•°ï¼Œå‘é‡å¼
x &lt;- c(-2, 0, 1)
ifelse(x &gt;=0, 1, 0)
```

```
## [1] 0 1 1
```

---
# ç¨‹åºæ§åˆ¶ç»“æ„
2&amp;#46; å¾ªç¯ç»“æ„


```r
for (i in 1:3) {
    print(i)
}
#æˆ–è€…ç”¨whileå‡½æ•°
i=1
while (i&lt;4) {
    print(i)
    i=i+1
}
#æˆ–è€…ç”¨repeatå‡½æ•°
i=1
repeat{
    print(i)
    i=i+1
    if(i&gt;3)break
}
```
æ³¨æ„ç”¨åˆ°çš„åˆ¤æ–­æ¡ä»¶å¿…é¡»æ˜¯é€»è¾‘æ ‡é‡å€¼ï¼Œä¸èƒ½ä¸ºNAæˆ–é›¶é•¿åº¦ã€‚
è¿™æ˜¯Rç¼–ç¨‹æ—¶æ¯”è¾ƒå®¹æ˜“å‡ºé”™çš„åœ°æ–¹ã€‚

---
# ç¨‹åºæ§åˆ¶ç»“æ„
å¾ªç¯ç»“æ„è¿›é˜¶ï¼Œ`apply()`å®¶æ—

ä¸Šè¿°æ˜¾å¼å¾ªç¯æ˜¯Rè¿è¡Œé€Ÿåº¦è¾ƒæ…¢çš„éƒ¨åˆ†ï¼Œæœ‰å¾ªç¯çš„ç¨‹åºä¹Ÿæ¯”è¾ƒå†—é•¿ï¼Œå»ºè®®ä½¿ç”¨`apply, sapply, lapply, vapply, tapply`ç­‰å‡½æ•°æ›¿ä»£ã€‚


```r
func=function(i)print(i)
a=lapply(1:3, func)
```

```
## [1] 1
## [1] 2
## [1] 3
```

å¦å¤–ï¼Œå»ºè®®å¾ªç¯è¿‡ç¨‹ä¸è¦åˆ¶ä½œå‰¯æœ¬ï¼š

ç±»ä¼¼äº`x &lt;- c(x, y)`è¿™æ ·çš„ç´¯ç§¯ç»“æœæ¯æ¬¡è¿è¡Œéƒ½ä¼šåˆ¶ä½œä¸€ä¸ªxçš„å‰¯æœ¬ï¼Œ åœ¨xå­˜å‚¨é‡è¾ƒå¤§æˆ–è€…é‡å¤ä¿®æ”¹æ¬¡æ•°å¾ˆå¤šæ—¶ä¼šå‡æ…¢ç¨‹åºã€‚

è€Œæ˜¯åº”è¯¥åœ¨å¾ªç¯å‰è®¾ç½®å¥½ç”¨æ¥ä¿å­˜ç»“æœçš„æ•°æ®ç»“æ„ï¼š

```r
x=numeric(100)
x[[i]]={iå¾ªç¯100æ¬¡äº§ç”Ÿçš„ç»“æœ}
```

---
# ç¨‹åºæ§åˆ¶ç»“æ„
3&amp;#46; ç®¡é“

åŸç”Ÿç®¡é“ï¼ŒRä»4.1.0ç‰ˆæœ¬å¼€å§‹æä¾›äº†ä¸€ä¸ª`|&gt;`è¿ç®—ç¬¦å®ç°ç®¡é“ï¼Œå¦‚è®¡ç®— `\(e^{\sqrt{2}}\)`ï¼š

```r
2 |&gt; sqrt() |&gt; exp()
```

```
## [1] 4.11325
```

ä½†æ˜¯æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ç”¨`magrittr`æä¾›çš„`%&gt;%`ï¼Œæ”¯æŒæ›´å¤æ‚çš„åº”ç”¨ï¼Œæ¯”å¦‚ç”¨`.`ä»£è¡¨äº§ç”Ÿçš„ä¸­é—´å˜é‡æ”¾åˆ°åˆé€‚çš„å‚æ•°ä½ç½®ï¼š

```r
library(magrittr)
"hhh"%&gt;%paste0("prefix_",.)
```

```
## [1] "prefix_hhh"
```
è¿˜æœ‰`%&lt;&gt;%`ç­‰æ–¹ä¾¿çš„å˜ä½“:

```r
a="hhh"; a%&lt;&gt;%paste0("prefix_",.)
a
```

```
## [1] "prefix_hhh"
```

---
# å‡½æ•°

ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°ï¼Œ ä¼˜ç‚¹æ˜¯ä»£ç å¤ç”¨ã€æ¨¡å—åŒ–è®¾è®¡ã€‚

&gt;å‡½æ•°å &lt;- function(å½¢å¼å‚æ•°è¡¨) å‡½æ•°ä½“

**ç‰¹æ®Šå½¢å‚**ï¼š`...`

```r
my_mean=function(...)sum(...)/length(c(...))
my_mean(1,2,3,4)
```

```
## [1] 2.5
```

**æ— åå‡½æ•°**: ä¸å®šä¹‰å‡½æ•°åä¹Ÿå¯ä»¥è°ƒç”¨

```r
a=lapply(1:3, \(i)print(i))
```

```
## [1] 1
## [1] 2
## [1] 3
```

**å˜é‡ä½œç”¨åŸŸ**ï¼šå…¨å±€å˜é‡ vs å±€éƒ¨å˜é‡



---
# å‡½æ•°

- .red[Rä¸­æ‰€æœ‰çš„å­˜åœ¨éƒ½æ˜¯**å¯¹è±¡**ï¼ˆobjectï¼‰]
å¯¹è±¡å…¶å®å°±æ˜¯ä¸€ç§å°è£…çš„æ¦‚å¿µï¼Œå®ƒæŠŠäº‹ç‰©å°è£…æˆä¸€ä¸ªç±»(class)ï¼Œç„¶åæä¾›ç±»çš„æ–¹æ³•(method)ï¼Œè€Œå…·ä½“çš„è¿‡ç¨‹äººä»¬çœ‹ä¸åˆ°ã€‚


```r
class(mean)
```

```
## [1] "function"
```

- .red[Rä¸­å‘ç”Ÿçš„åŠ¨ä½œéƒ½æ˜¯**å‡½æ•°è°ƒç”¨**ï¼ˆfunction callï¼‰???]

å‡½æ•°è°ƒç”¨æœ‰å››ç§æ–¹å¼ï¼š

1 å‰ç¼€å½¢å¼ã€‚ 
è¿™ä¹Ÿæ˜¯ä¸€èˆ¬çš„æ ¼å¼

```r
mean(1:2)
```

```
## [1] 1.5
```

---

# å‡½æ•°

2 ä¸­ç¼€å½¢å¼ã€‚äºŒå…ƒè¿ç®—ç¬¦å®é™…ä¸Šéƒ½æ˜¯å‡½æ•°

```r
1+1
```

```
## [1] 2
```

```r
`+`(1,1)
```

```
## [1] 2
```

```r
`%love%`=function(a,b)paste0(a," loves ",b)
"Romeo"%love%"Juliet"
```

```
## [1] "Romeo loves Juliet"
```

---

# å‡½æ•°

3 æ›¿æ¢å½¢å¼ã€‚

```r
x &lt;- 1:2
names(x) &lt;- c("a", "b")
x
```

```
## a b 
## 1 2
```

```r
print(`names&lt;-`)
```

```
## function (x, value)  .Primitive("names&lt;-")
```

---

# å‡½æ•°

4 ç‰¹æ®Šå½¢å¼ã€‚x[1], x[[1]]è¿™äº›å–å­é›†æˆ–å…ƒç´ ç­‰

```r
x &lt;- 1:5
x[1]
```

```
## [1] 1
```

```r
`[`(x, 1)
```

```
## [1] 1
```

ç¡®å®ï¼Œ.red[Rä¸­å‘ç”Ÿçš„åŠ¨ä½œéƒ½æ˜¯**å‡½æ•°è°ƒç”¨**ï¼ˆfunction callï¼‰]ï¼ŒçŸ¥æ™“å‡½æ•°è°ƒç”¨çš„å½¢å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ç”¨æŸäº›åŒ…çš„å‡½æ•°æ—¶æ˜ç¡®é—®é¢˜æ¥æºï¼ŒæŸ¥æ‰¾æºç ç­‰ã€‚

---
# Debug
æŸä¸ªå‡½æ•°çªç„¶å¤±çµäº†

1. å·¥ä½œç¯å¢ƒå˜åŒ–

ç¯å¢ƒæ˜¯Rè¯­è¨€æ¯”è¾ƒå›°éš¾çš„æ¦‚å¿µï¼Œä¸€èˆ¬ä¸éœ€è¦æ·±å…¥äº†è§£ä¹Ÿèƒ½ç”¨ã€‚

ä½†æˆ‘ä»¬è¦çŸ¥é“ï¼Œå¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬å¤„äºGlobal Environmentï¼Œæˆ‘ä»¬æ•²å‡ºæ¥çš„æ¯ä¸€ä¸ªå˜é‡å(å‡½æ•°å)éƒ½æ˜¯ä¼˜å…ˆåœ¨å…¨å±€ç¯å¢ƒæ‰¾ï¼Œæ‰¾ä¸åˆ°çš„è¯å°±`search()`é‡Œé¢æŒ‰é¡ºåºå»æ¯ä¸ªç¯å¢ƒæ‰¾ã€‚
æ‰€ä»¥è¦æ³¨æ„ç¯å¢ƒä¼˜å…ˆçº§ä»¥åŠå˜é‡åå†²çªï¼Œæç«¯æƒ…å†µå¦‚ä¸‹ï¼š


```r
1+1
```

```
## [1] 2
```

```r
#å®šä¹‰äº†`+`,æˆ–è€…æ–°å¯¼å…¥çš„åŒ…åŒ…å«ä¸€ä¸ª`+`çš„å‡½æ•°åï¼Œè¦†ç›–äº†baseçš„åŠ æ³•
`+`=`-`
1+1
```

```
## [1] 0
```

å¸¸ä½¿ç”¨`pkg::func`çš„å½¢å¼è°ƒç”¨å‡½æ•°æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œå¯ä»¥é˜²æ­¢ä¸åŒåŒ…çš„åŒåå‡½æ•°å†²çªã€‚

---
# Debug

2&amp;#46; æ–­ç‚¹ï¼Œ`traceback()`ï¼Œ`debug()`ï¼Œ `browser()`

åå‘è¿½è¸ª(traceback)å°†é”™è¯¯å®šä½åˆ°æŸä¸€å‡½æ•°è°ƒç”¨ã€‚

å¯ä»¥ç”¨`debug(func)`å‘½ä»¤å¯¹å‡½æ•°funcå¼€å¯è·Ÿè¸ªè¿è¡Œã€‚

ç”¨`undebug(func)`å–æ¶ˆå¯¹funcçš„è¿™ç§æ“ä½œã€‚

[ä¾‹å­](test.Rmd)

---

# Debug

3&amp;#46; æˆ‘è¦debugçš„å‡½æ•°åœ¨å“ªï¼Ÿ

ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æŠ¥é”™çš„ä»£ç è¡Œä»¥åŠå…·ä½“çš„å‡½æ•°ï¼Œä¾¿å¯ä»¥ä½¿ç”¨`debug()`ã€‚

ä½†æœ‰æ—¶å€™ä¼šå‘ç°ä¸€äº›å‡½æ•°æ— æ³•è¢«æ­£ç¡®å®šä½ï¼Œå…·ä½“ä»£ç ä¹Ÿåªèƒ½çœ‹åˆ°`UseMethod()`ï¼šå…¶å®æ˜¯æˆ‘ä»¬ç¢°åˆ°äº†**æ³›å‹å‡½æ•°**ã€‚ä¸‹é¢åŒæ ·ä¸€ä¸ª`summary`å‡½æ•°ï¼Œä¸ºå•¥å¯¹womenå’Œfitåšå‡ºäº†å®Œå…¨ä¸åŒçš„å¤„ç†ï¼Ÿ


```r
summary(women)
fit &lt;- lm(weight ~ height, data=women)
summary(fit)
```




```r
class(women); class(fit)
```

```
## [1] "data.frame"
```

```
## [1] "lm"
```
åŸæ¥ä»–ä»¬æ˜¯ä¸åŒçš„ç±»ï¼ˆclassï¼‰ï¼Œæ³›å‹å‡½æ•°ä¼šæ›´å…·å¯¹è±¡çš„ç±»é€‰æ‹©è¿è¡Œä»€ä¹ˆæ ·çš„ä»£ç ï¼ˆå³è§äººè¯´äººè¯ï¼Œè§é¬¼è¯´é¬¼è¯ï¼‰ï¼š
è°ƒç”¨`func.class()`å‡½æ•°ï¼Œä¸Šè¿°å°±æ˜¯åˆ†åˆ«è°ƒç”¨äº†`summary.data.frame()`ï¼Œ`summary.lm()`ã€‚`print`å’Œ`plot`ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„æ³›å‹å‡½æ•°ã€‚

---

# Debug

3&amp;#46; æˆ‘è¦debugçš„å‡½æ•°åœ¨å“ªï¼Ÿ

æˆ–è€…æˆ‘ä»¬å¯èƒ½å‘ç°æŸäº›æŠ¥é”™å‡½æ•°not foundï¼ˆä½†æˆ‘ä»¬åˆç¡®å®šæœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼‰ï¼š
å…¶å®æ˜¯æˆ‘ä»¬ç¢°åˆ°äº†**éå¯¼å‡ºå‡½æ•°**ï¼ˆRåŒ…å¼€å‘è€…ä¸æƒ³ç”¨æˆ·çœ‹åˆ°æ‰€æœ‰çš„å‡½æ•°ï¼ŒåªæŠŠæœ‰ç”¨çš„å¯¼å‡ºï¼‰ã€‚


```r
library(reshape2)
class(mtcars)
#meltæ˜¯æ³›å‹å‡½æ•°ï¼Œé‚£åº”è¯¥è°ƒç”¨melt.data.frame
melt.data.frame(mtcars,id.vars = "cyl")
## Error in melt.data.frame(mtcars, id.vars = "cyl") : 
##  could not find function "melt.data.frame"
```
æ‰¾åˆ°è¿™äº›å‡½æ•°çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼ˆæ¯•ç«ŸRåŒ…éœ€è¦éƒ½å¼€æºï¼‰ï¼š`pkg:::func`å³å¯


```r
reshape2:::melt.data.frame(mtcars,id.vars = "cyl")
```

æœ‰æ—¶å€™æˆ‘ä»¬é€šè¿‡debugå¯ä»¥å‘ç°ä¸€äº›æœ‰ç”¨çš„å†…éƒ¨å‡½æ•°ï¼ˆæ¯”å¦‚ä»é‚£ç§ä¸€æ­¥/å¾ˆä¹…å®ŒæˆXXåˆ†æçš„å‡½æ•°ä¸­æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ï¼‰ï¼Œ
è¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨`pkg:::func`åšæƒ³åšçš„éƒ¨åˆ†ã€‚

---
# ä»£ç æ•´ç†

æˆ‘ä»¬åœ¨åšæ•°æ®åˆ†ææ—¶ä¼šäº§ç”Ÿå¤§é‡ä»£ç ï¼Œåšå¥½æ•´ç†éå¸¸é‡è¦ã€‚

- æœ€å¼€å§‹ï¼Œæ¯ä¸€ä¸ªç‹¬ç«‹çš„Rè„šæœ¬è¿›è¡Œåˆ†æ ï¼ˆä»£ç å†—ä½™åº¦å¤ªé«˜ï¼ŒåæœŸå¾ˆéš¾å¿«é€Ÿçœ‹æ‡‚ï¼‰

- å­¦ä¼šç¼–å†™å‡½æ•°ï¼Œå¤åˆ¶å‡½æ•°åˆ°ä¸åŒçš„Rè„šæœ¬ä½¿ç”¨ï¼ˆnä¸ªåœ°æ–¹çš„å‡½æ•°éœ€è¦ä¿®æ”¹næ¬¡ï¼‰

- å°†å¸¸ç”¨çš„å‡½æ•°æ”¾åœ¨ä¸€ä¸ªRè„šæœ¬ä¸‹ï¼Œè¦ç”¨çš„æ—¶å€™`source()`æ•´ä¸ªè„šæœ¬ï¼ˆå…¨å±€ç¯å¢ƒä¸­å‡ºç°å¤§é‡å‡½æ•°åï¼Œå¯èƒ½è¿˜ä¼šå¼•èµ·å†²çªï¼‰

- å°†å¸¸ç”¨å‡½æ•°æ•´ç†æˆRåŒ…ï¼Œå†™å¥½æ³¨é‡Šå’Œå¸®åŠ©æ–‡æ¡£ï¼Œæ–¹ä¾¿è°ƒç”¨å’Œåˆ†äº« ï¼ˆå˜å˜é¦™)

---
class: left, middle

## .gray-title[Lv1. Use R]
## .gray-title[Lv2. R programming]
## Lv3. R markdown (to everything)
## .gray-title[Lv4. R package/shiny]
.footnote[[*] 3,4éƒ¨åˆ†éå¿…éœ€ï¼Œä½†æˆ‘è§‰å¾—å­¦ä¹ åä¾¿ä¼šæœ‰æƒŠå–œ]

---
# R Markdown

R Markdownæ˜¯ä¸€ç§æ–‡æœ¬æ ¼å¼ï¼Œç”¨äºåˆ›å»ºå…·æœ‰ä»£ç ã€æ–‡æœ¬ã€å›¾å½¢å’Œè¾“å‡ºç»“æœçš„å¯é‡å¤æ€§æŠ¥å‘Šã€‚
æ˜¯â€œæ–‡å­¦å¼ç¼–ç¨‹â€(literate programming, (Knuth 1984))æ€æƒ³çš„å®è·µã€‚

å®ƒæ˜¯åœ¨Rè¯­è¨€ç¯å¢ƒä¸­å¼€å‘çš„ï¼Œä¹Ÿå¯ä»¥ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Pythonï¼Œshellï¼‰ç»“åˆä½¿ç”¨ã€‚

ä¼˜ç‚¹ï¼š

-   å¯é‡å¤æ€§ï¼šä»£ç å’Œç»“æœéƒ½æ˜¯å¯é‡å¤çš„ï¼Œæœ‰åŠ©äºç¡®ä¿ç ”ç©¶ç»“æœçš„å¯é æ€§å’Œé€æ˜åº¦ã€‚

-   æ•ˆç‡ï¼šä½¿ç”¨R Markdownåœ¨å•ä¸ªæ–‡ä»¶ä¸­ç»„ç»‡å’Œè®°å½•æ‰€æœ‰å†…å®¹ï¼ŒèŠ‚çœæ—¶é—´å’Œç²¾åŠ›ã€‚

-   çµæ´»æ€§ï¼šR Markdownæ”¯æŒå¤šç§æ ¼å¼å’Œè¾“å‡ºé€‰é¡¹ï¼Œæ ¹æ®éœ€è¦è‡ªå®šä¹‰æ ·å¼å¸ƒå±€ã€‚

æ€»ä¹‹ï¼Œæ¯”wordå¥½ç”¨ï¼Œæ¯”Latexå¥½å­¦ğŸ˜‚

Yihui Xieå¤§ä½¬çš„å®˜æ–¹æ–‡æ¡£ï¼š[R Markdown: The Definitive Guide (bookdown.org)](https://bookdown.org/yihui/rmarkdown/)

ä»¥åŠå‚è€ƒä¹¦ï¼š[R Markdown Cookbook (bookdown.org)](https://bookdown.org/yihui/rmarkdown-cookbook/)

???
è¿›å…¥Rstudioæ‰“å¼€ä¸€ä¸ªRmdçœ‹çœ‹
å¦‚æœä»€ä¹ˆè¿›é˜¶åŠŸèƒ½éƒ½ä¸ç”¨ï¼Œå…‰ç”¨æ¥åšä¸ªRè„šæœ¬ä¹Ÿä¸é”™ï¼Œæ¯•ç«Ÿå¯ä»¥ä¼˜ç¾çš„æŸ¥çœ‹è¡¨æ ¼ï¼Œç•™å­˜æ¯ä¸€ä¸ªä»£ç å—çš„å›¾ç­‰ç­‰

---
# To Documents

Rmdæ–‡æ¡£å¤´éƒ¨æ˜¯YAMLå…ƒæ•°æ®ï¼Œå¯æŒ‡å®šå„ç§è¾“å‡ºå‚æ•°

1. [HTML](to_document/test.html)

2. [PDF](to_document/test.pdf)

3. Word

ä¼˜ç‚¹ï¼š
1. å…¬å¼ï¼ŒåŒ–å­¦åˆ†å­å¼éå¸¸å¥½å†™

2. æ–‡çŒ®æ’å…¥ä¹Ÿä¸é”™ï¼ˆé…åˆZoteroï¼‰

2. å›¾è¡¨è‡ªåŠ¨ç¼–å·å’Œå¼•ç”¨ã€é“¾æ¥ï¼ˆæˆ‘è§‰å¾—æ¯”wordå¥½ç”¨ç‚¹ï¼‰

3. æ”¯æŒäº¤äº’å¼å›¾å½¢ï¼ˆHTMLï¼‰

---

# To Presentation

R Markdownæ”¯æŒç”Ÿæˆå„ç§å¹»ç¯ç‰‡æ–‡ä»¶ï¼ˆæ­¤å¹»ç¯ç‰‡ä¹Ÿæ˜¯ç”±Rmdç”Ÿæˆçš„ğŸ˜‚ï¼‰

1. PowerPoint

    å¸¸ç”¨ï¼Œæ˜“åˆ†äº«

2. ioslide/Slidy

    ç½‘é¡µæ ¼å¼çš„å¹»ç¯ç‰‡ï¼Œæ”¯æŒäº¤äº’

3. Beamer

    PDFå¹»ç¯ç‰‡ï¼Œæ¨¡ç‰ˆä¼—å¤šï¼Œå¤§å­¦è¯¾å ‚çƒ­è¡·ä½¿ç”¨

---

# To Interactive Presentation 

åœ°å›¾ (æ‹œæ‰˜ï¼ŒPPTå¯äº¤äº’çœŸçš„å¾ˆé…·)ï¼š
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a0d5ca16a5286d0d017b" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-a0d5ca16a5286d0d017b">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}],"setView":[[30,120],4,[]]},"evals":[],"jsHooks":[]}</script>

---

# To Research Papers

`rticle`åŒ…ï¼ŒåŒ…å«ä¸€å¥—è‡ªå®šä¹‰ R Markdown æ ¼å¼å’Œæ¨¡æ¿ï¼Œç”¨äºåˆ›ä½œæœŸåˆŠæ–‡ç« å’Œä¼šè®®æäº¤ã€‚

ä¾‹å­ï¼š

- [Frontiers](to_article/Test/Test.pdf)

- [Bioinformatics](to_article/Bioinfo/Bioinfo.pdf)

---
# To Website

Rmarkdownå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ­å»ºç®€æ˜“ç½‘ç«™ï¼š

- index.Rmdæ˜¯ä¸»é¡µå†…å®¹ï¼Œ å¯ä»¥åœ¨æ­¤å¤„äººå·¥åŠ å…¥å…¶å®ƒé¡µé¢é“¾æ¥ã€‚

- _site.ymlæ˜¯ä¸€ä¸ªYAMLæ–‡ä»¶ï¼Œ å…¶ä¸­åŒ…å«ç«™ç‚¹çš„è®¾å®šå’Œè¾“å‡ºè®¾å®šã€‚

[ä¾‹å­](to_website/_site/index.html)ï¼š

File -&gt; New Project -&gt; New directory -&gt; Simple R Markdown Website -&gt; 

Create Project (click Open in new session) -&gt; Build -&gt; Build Website

---

# To Blog

&lt;a href="https://bookdown.org/yihui/blogdown/"&gt;
&lt;img src="images/blogdown.jpg" alt="Rshizhan" width="25%" style="float:right"&gt;&lt;/a&gt;

Ræ‰©å±•åŒ…[blogdown](https://github.com/rstudio/blogdown)å¯ä»¥ä¸Hugoè½¯ä»¶é…åˆåˆ¶ä½œç®€å•çš„é™æ€åšå®¢ç½‘ç«™ã€‚ 


ç½‘ç«™çš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œåªè¦ä¸Šä¼ åˆ°ä»»æ„çš„ç½‘ç«™æœåŠ¡å™¨å°±å¯ä»¥å‘å¸ƒï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚

æˆ‘çš„åšå®¢ï¼š[Asa's blog](https://asa-blog.netlify.app/)

å‚è€ƒä¹¦ï¼š[blogdown: Creating Websites with R Markdown (bookdown.org)](https://bookdown.org/yihui/blogdown/)

---
# To Book

&lt;a href="https://bookdown.org/yihui/bookdown/"&gt;
&lt;img src="images/bookdown.jpg" alt="Rshizhan" width="25%" style="float:right"&gt;&lt;/a&gt;

Rçš„[bookdown](https://github.com/rstudio/bookdown)æ‰©å±•åŒ… 

åœ¨bookdownçš„ç®¡ç†ä¸‹ï¼šä¸€æœ¬ä¹¦çš„å†…å®¹å¯ä»¥åˆ†è§£æˆå¤šä¸ªRmdæ–‡ä»¶ï¼Œ å…¶ä¸­å¯ä»¥æœ‰å¯æ‰§è¡Œçš„Rä»£ç ï¼Œ Rä»£ç ç”Ÿæˆçš„æ–‡å­—ç»“æœã€è¡¨æ ¼ã€å›¾å½¢å¯ä»¥è‡ªåŠ¨æ’å…¥åˆ°ç”Ÿæˆçš„å†…å®¹ä¸­ï¼Œ è¡¨æ ¼å’Œå›¾å½¢å¯ä»¥æ˜¯æµ®åŠ¨æ’ç‰ˆçš„ã€‚ è¾“å‡ºæ ¼å¼ä¸»è¦æ”¯æŒgitbookæ ¼å¼çš„ç½‘é¡µå›¾ä¹¦ã€‚

æˆ‘ä¹Ÿç¨å¾®å°è¯•å†™äº†ä¸€ä¸‹ï¼š[MetaNet Tutorial](../../R/MetaNet_tutorial/_book/index.html)

å‚è€ƒä¹¦ï¼š[bookdown: Authoring Books and Technical Documents with R Markdown](https://bookdown.org/yihui/bookdown/)

---
class: left, middle

## .gray-title[Lv1. Use R]
## .gray-title[Lv2. R programming]
## .gray-title[Lv3. R markdown (to everything)]
## Lv4. R package/shiny

---

# å†™RåŒ…
&lt;a href="https://r-pkgs.org/"&gt;
&lt;img src="images/rpackge.png" alt="RPackage" width="18%" style="float:right"&gt;&lt;/a&gt;

åŒ…æ˜¯å¯é‡ç° R ä»£ç çš„åŸºæœ¬å•å…ƒï¼ŒåŒ…æ‹¬å¯é‡ç”¨çš„ R å‡½æ•°ã€æè¿°å¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„æ–‡æ¡£å’Œç¤ºä¾‹æ•°æ®ã€‚
ä¸€ä¸ªåŒ…å°†ä»£ç ã€æ•°æ®ã€æ–‡æ¡£å’Œæµ‹è¯•æ†ç»‘åœ¨ä¸€èµ·ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“ä¸ä»–äººå…±äº«ã€‚

ç®€å•ä¾‹å­ï¼ˆéœ€è¦ä¸‹è½½`roxygen2`åŒ…ï¼‰ï¼š

File -&gt; New Project -&gt; New directory -&gt; R package -&gt; 

Create Project (click Open in new session)-&gt; Package name -&gt; Build -&gt; Install

&lt;img src="images/rfile.png" alt="RPackage file" width="50%" style="float:right"&gt;

æœ€ç®€å•çš„åŒ…åªéœ€è¦è¿™äº›ç›®å½•å’Œæ–‡ä»¶å³å¯ï¼Œ
- [R]()ç›®å½•ä¸‹æ”¾åœ¨æˆ‘ä»¬ç¼–å†™çš„Rå‡½æ•°è„šæœ¬
- [man](https://r-pkgs.org/man.html)ç›®å½•æ”¾ç€æ‰€æœ‰å‡½æ•°çš„å¸®åŠ©æ–‡æ¡£ï¼ˆ`roxygenise()`å‡½æ•°ç”Ÿæˆï¼Œä¸è¦è‡ªå·±å†™ï¼‰
- [DECRIPTION](https://r-pkgs.org/description.html)å®šä¹‰äº†åŒ…çš„å„ç§å…ƒæ•°æ®ï¼ŒåŒ…å/ç‰ˆæœ¬/ä¾èµ–åŒ…ç­‰ç­‰ï¼Œéå¸¸é‡è¦
- [NAMESPACE](https://r-pkgs.org/description.html)æ§åˆ¶å‡½æ•°çš„å¯è§†æ€§ï¼ˆ`roxygenise()`å‡½æ•°ç”Ÿæˆï¼Œä¸è¦ä¿®æ”¹ï¼ï¼‰


å‚è€ƒä¹¦ï¼š[R Packages (2e) (r-pkgs.org)](https://r-pkgs.org/)

---

# å†™RåŒ…

å¦‚æœçœŸçš„æœ‰æ„å¼€å‘RåŒ…ï¼Œå»ºè®®èµ°`devtools`çš„æµç¨‹ï¼Œè¦æ¯”å‰é¢çš„ç®€å•ä¾‹å­å¥½ç”¨ã€‚


```r
library(devtools)
#åˆ›å»ºRåŒ…
create_package("testpkg")
#é…ç½®gitç”¨äºç‰ˆæœ¬æ§åˆ¶
use_git()
#åˆ›å»ºä¸€ä¸ªRè„šæœ¬ï¼Œå¼€å§‹å†™å‡½æ•°
use_r("first")
#ç”Ÿæˆmanæ–‡ä»¶å’ŒNAMESPACE
document("./")
#ä½¿æ‰€æœ‰å‡½æ•°å¯ç”¨ï¼ˆæ²¡æœ‰installä½†RåŒ…å·²åœ¨å†…å­˜ï¼‰
load_all("./")
#æ£€æŸ¥RåŒ…è¯­æ³•ï¼Œå»ºè®®æ¯æ¬¡é‡è¦ä¿®æ”¹åè¿è¡Œä¸€æ¬¡ï¼Œè§£å†³å®Œæ‰€æœ‰çš„Errorï¼ŒWarningï¼ŒNoteå†è¿›ä¸€æ­¥ä¿®æ”¹ï¼Œä¸è¦ç§¯ç´¯è¾ƒå¤šé”™è¯¯
check("./")
#æ‰“åŒ…ä¸ºbundleåŒ…ï¼Œ.tar.gz
build("./")
#installæˆ‘ä»¬å†™å¥½çš„RåŒ…
install("./")
#å®šä¹‰ä¸€äº›æµ‹è¯•ä¾‹å­
use_testthat()
```

å¾ªç¯åé¢å‡ æ­¥ï¼šfunction -&gt; document -&gt; load_all -&gt; check -&gt;installï¼Œç›´åˆ°åŠŸèƒ½å®Œå–„ï¼Œcheckæ— è¯¯ã€‚

---

# å†™RåŒ…

[å†™ä¸€ä¸ªå‡½æ•°è¯•è¯•](testpkg/R/test.R)

- å‡½æ•°åº”è¯¥åŠŸèƒ½æ˜ç¡®ï¼Œä¸èƒ½ä½¿ç”¨`library`ï¼Œè€Œåº”è¯¥ç”¨pkg::funcè°ƒç”¨ï¼Œå¹¶ä¸”è¿™é‡Œçš„pkgä¸€å®šè¦åœ¨DESCRIPTIONä¸­å£°æ˜ã€‚
- å‡½æ•°ä¸åº”è¯¥äº§ç”Ÿä¸è‰¯å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ä¿®æ”¹ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼Œè°¨æ…ä½¿ç”¨`option`, `par`, `setwd`ç­‰å‡½æ•°ã€‚
- å‡½æ•°çš„å¤´æ–‡ä»¶å¾ˆé‡è¦ï¼ŒåŒ…å«äº†å¸®åŠ©æ–‡æ¡£ä»¥åŠå†³å®šå‡½æ•°æ€§è´¨çš„å‚æ•°ï¼š
- ä½¿ç”¨Shift+option+command+Rå¯ä»¥å¸®åŠ©ç”Ÿæˆå¤´æ–‡ä»¶
.pull-left[
&lt;table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; æ ‡ç­¾ &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; æè¿° &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @title &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å‡½æ•°å &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @description &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ä¸€è¡Œçš„å‡½æ•°æè¿° &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @details &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å¤šè¡Œçš„å‡½æ•°æè¿°(ç¬¬ä¸€è¡Œä¹‹åè¦æœ‰ç¼©è¿›) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @param &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å‡½æ•°å‚æ•° &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @export &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; æ·»åŠ å‡½æ•°åˆ°NAMESPACE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @method generic class &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; æ³›å‹S3æ–¹æ³•çš„æ–‡æ¡£ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @import importFrom &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å£°æ˜è°ƒç”¨çš„å‡½æ•°æˆ–åŒ… &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[
&lt;table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; æ ‡ç­¾ &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; æè¿° &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @return &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å‡½æ•°è¿”å›çš„å€¼ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @author &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ä½œè€…å’Œè”ç³»åœ°å€ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @rdname &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ç»‘å®šåˆ°å…¶ä»–å‡½æ•° &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @examples &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ä½¿ç”¨å‡½æ•°çš„ä¾‹å­ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @note &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ä½¿ç”¨å‡½æ•°çš„æ³¨æ„äº‹é¡¹ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @aliases &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ç”¨æˆ·èƒ½å¤Ÿæ‰¾åˆ°æ–‡æ¡£çš„é¢å¤–çš„åˆ«å &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; @references &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; å‡½æ•°æ‰€æ¶‰åŠçš„æ–¹æ³•çš„å‚è€ƒæ–‡æ¡£ &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---

# å†™RåŒ…

å‘å¸ƒåŒ…:

- [CRAN submission](https://xmpalantir.wu.ac.at/cransubmit/) è¯·ä»”ç»†é˜…è¯»[CRAN Repository Policy](https://cran.r-project.org/web/packages/policies.html)ï¼Œç„¶åå¿…é¡»è®©ä»£ç é€šè¿‡`R CMD check`å†æäº¤ï¼Œä¸ç„¶ä¼šç›´æ¥æ‹’æ”¶ã€‚æˆ‘ä»¬æäº¤çš„åŒ…æ˜¯bundleåŒ…ï¼Œ.tar.gzæ ¼å¼ã€‚è¿‡äº†æœºæ£€åå°±ä¼šæœ‰â€œå®¡åŒ…äººâ€è”ç³»ï¼ˆä¸€èˆ¬æ˜¯å¿—æ„¿è€…ï¼Œæˆ‘ä»¬åº”å½“æ€åº¦å¥½äº›ï¼‰ï¼Œ
å†ç§¯ææ²Ÿé€šä¿®æ”¹ä»£ç å°±å¥½ï¼Œæœ€åé€šè¿‡å®¡æ ¸ä¸€å¤©å°±èƒ½åœ¨CRANä¸Šçœ‹åˆ°äº†ã€‚

- [BioConductor submission](https://www.bioconductor.org/) ç”¨äºç”Ÿç‰©ä¿¡æ¯å­¦çš„å¼€æºè½¯ä»¶ä¸“é¢˜åº“ï¼Œä¸Šä¼ å‰ä»”ç»†é˜…è¯»[Guidelines](https://contributions.bioconductor.org/submission-overview.html)ï¼Œ
æ˜ç¡®åŒ…çš„ä¸»é¢˜è¦è·Ÿç”Ÿç‰©æœ‰ç›¸å…³æ€§ï¼ˆ Software, Experiment Data, Annotation and Workflow.ï¼‰ï¼Œå‘å¸ƒåŒ…çš„æµç¨‹æ˜¯[Github issues](https://github.com/Bioconductor/Contributions/issues)ï¼Œ
å®¡æ ¸è¿‡ç¨‹å…¨å…¬å¼€é€æ˜ï¼Œä½ ç°åœ¨å°±èƒ½ç‚¹è¿›å»çœ‹æœ‰å“ªäº›åŒ…æ­£åœ¨æäº¤ã€‚

- [Github](https://github.com/) è¿™é‡Œå°±æœ€è‡ªç”±äº†ï¼Œä½ å¯ä»¥éšæ„ä¸Šä¼ åœ¨è‡ªå·±çš„ä»“åº“ï¼Œä¹Ÿå¯ä»¥é‚€è¯·åˆ«äººç›´æ¥ä»githubå®‰è£…ã€‚
 
---

# å†™RåŒ…

æˆ‘å†™çš„å‡ ä¸ªåŒ…ï¼Œæ¬¢è¿ä½¿ç”¨ä¸æ‰¹è¯„æŒ‡æ­£ï¼š

1.  [MetaNet](https://github.com/Asa12138/MetaNet), Network analysis for omics data, you can find the [MetaNet Tutorial](MetaNet_tutorial) here.

2.  [pcutils](https://github.com/Asa12138/pcutils), which contains many useful tools or functions for statistics or visualization. I always use this package for productivity.

3.  [pctax](https://github.com/Asa12138/pctax), which contains some helpful functions for microbiome analysis.

4.  [ReporterScore](https://github.com/Asa12138/ReporterScore), it is ReporterScore Functional Enrichment Method for Microbiome.

---
# åˆ¶ä½œShiny APP

&lt;a href="https://mastering-shiny.org/"&gt;
&lt;img src="images/rshiny.png" alt="Rshizhan" width="20%" style="float:right"&gt;&lt;/a&gt;

Shiny æ˜¯ä¸€ä¸ª R åŒ…ï¼Œå¯è½»æ¾åœ°ç›´æ¥ä» R æ„å»ºäº¤äº’å¼ Web åº”ç”¨ç¨‹åºã€‚

å¯ä»¥åœ¨ç½‘é¡µä¸Šæ‰˜ç®¡ç‹¬ç«‹åº”ç”¨ç¨‹åºæˆ–å°†å®ƒä»¬åµŒå…¥ R Markdown æ–‡æ¡£ã€‚è¿˜å¯ä»¥ä½¿ç”¨ CSS ä¸»é¢˜ã€html å°éƒ¨ä»¶å’Œ JavaScript æ“ä½œæ‰©å±•Shiny åº”ç”¨ç¨‹åºã€‚

[ä¾‹å­](test_shiny/app.R)ï¼š

File -&gt; New Project -&gt; New directory -&gt; Shiny Application -&gt; 

Create Project (click Open in new session) -&gt; Run App


```r
shiny::runApp("test_shiny/app.R")
```

å®˜æ–¹æ•™ç¨‹ï¼š[Shiny Learning Resources](https://shiny.rstudio.com/tutorial/)

å‚è€ƒä¹¦ï¼š[Mastering Shiny](https://mastering-shiny.org/)

---
# åˆ¶ä½œShiny APP

æˆ‘çš„å®è·µï¼š

[**iphylo visual**](), which is developed in cooperation with Li Yueer.

&lt;img src="images/iphylo.png" alt="Rshizhan" width="80%"&gt;

---

class: center, middle, inverse

# è°¢è°¢ğŸ™

æœ¬å¹»ç¯ç‰‡ä½¿ç”¨ R åŒ… [**xaringan**](https://github.com/yihui/xaringan) åˆ¶ä½œï¼›

--

ä¾èµ–äº[remark.js](https://remarkjs.com)ã€[**knitr**](https://yihui.org/knitr)ã€ä»¥åŠ [R Markdown](https://R markdown.rstudio.com)ã€‚

--

å‚è€ƒèµ„æ–™ï¼š

[æä¸œé£ã€ŠRè¯­è¨€æ•™ç¨‹ã€‹](https://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html)

--

ä»¥åŠæ–‡ä¸­æåˆ°çš„å…¶ä»–å„ç§å­¦ä¹ èµ„æ–™

--

æ„Ÿè°¢chatGPTè€å¸ˆ

--

.

--

.

--

.

--

THE END
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLanguage": "r",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
